// This script is loaded both on the frontend page and in the Visual Builder.
(function ($) {
  $(document).ready(function () {
	$('.dipl-audio-card').each(function () {
	  var $card = $(this);
	  var playerId = $card.data('player-id');
	  var containerId = $card.data('container-id');
	  var audioSrc = $card.data('audio-src');

	  if (!audioSrc || $('#' + playerId).data('jPlayer')) {
		return; // skip if no audio or already initialized
	  }

	  $('#' + playerId).jPlayer({
		ready: function () {
		  $(this).jPlayer('setMedia', { mp3: audioSrc });
		},
		cssSelectorAncestor: '#' + containerId,
		supplied: 'mp3',
		preload: 'auto',
		useStateClassSkin: true,
		autoBlur: false,
		smoothPlayBar: true,
		keyEnabled: true,
		wmode: 'window',
	  });
	});
  });
})(jQuery);
