function dipl_close_all_lists(a){jQuery(".dipl_ajax_search_results").each(function(){let e=jQuery(this);e.is(a)||e.is(jQuery(a).parents(e))||!(jQuery(a).parents(".dipl_ajax_search_active").length<1)||jQuery(this).remove()})}function dipl_validate_script(a){return!/<script>/i.test(a)}function dipl_validate_html(a){return!/</.test(a)}jQuery(document).ready(function(a){a("body").on("input",".dipl_ajax_search_field",function(e){let s=a(this),l=s.val(),r=s.data("search-post-type"),t=s.data("search-in"),i=s.data("display-fields"),c=s.data("url-new-window"),p=s.data("number-of-results"),d=s.data("no-result-text"),o=s.data("orderby"),n=s.data("order"),h=s.data("use-masonry"),x=s.data("exclude_protected_posts");if(!l||""===l)return s.closest(".dipl_ajax_search").removeClass("dipl_ajax_search_active"),s.closest(".dipl_ajax_search").parents(".et_pb_column").removeClass("dipl_ajax_search_active_parent"),s.closest(".dipl_ajax_search").parents(".et_pb_row").removeClass("dipl_ajax_search_active_parent"),s.parents(".dipl_ajax_search_field_wrap").removeClass("dipl_ajax_search_loader"),!1;if(dipl_validate_script(l)&&dipl_validate_html(l)&&l.length>2){s.parents(".dipl_ajax_search_field_wrap").hasClass("dipl_ajax_search_loader")||s.parents(".dipl_ajax_search_field_wrap").addClass("dipl_ajax_search_loader");let j=s.closest(".dipl_ajax_search").find(".dipl_ajax_search_nonce").val();if(!dipl_validate_script(j)||!dipl_validate_html(j))return!1;a.ajax({type:"POST",url:DiviPlusFrontendData.ajaxurl,data:{action:"dipl_ajax_search_results",dipl_ajax_search_nonce:j,post_types:r,search_in:t,display_fields:i,url_new_window:c,number_of_results:p,no_result_text:d,orderby:o,order:n,masonry:h,search:l,exclude_protected:x},success:function(a){s.parents(".dipl_ajax_search_field_wrap").removeClass("dipl_ajax_search_loader"),""!==a?(s.closest(".dipl_ajax_search").addClass("dipl_ajax_search_active"),s.closest(".dipl_ajax_search").parents(".et_pb_column").addClass("dipl_ajax_search_active_parent"),s.closest(".dipl_ajax_search").parents(".et_pb_row").addClass("dipl_ajax_search_active_parent"),s.closest(".dipl_ajax_search").find(".dipl_ajax_search_results_wrap").html(a),s.closest(".dipl_ajax_search").find(".dipl_ajax_search_result_masonry").length>0&&s.closest(".dipl_ajax_search").find(".dipl_ajax_search_result_masonry .dipl_ajax_search_items").isotope({itemSelector:".dipl_ajax_search_isotope_item",layoutMode:"masonry",percentPosition:!0,resize:!0})):(s.closest(".dipl_ajax_search").removeClass("dipl_ajax_search_active"),s.closest(".dipl_ajax_search").parents(".et_pb_column").removeClass("dipl_ajax_search_active_parent"),s.closest(".dipl_ajax_search").parents(".et_pb_row").removeClass("dipl_ajax_search_active_parent"))},error:function(){}})}else s.parents(".dipl_ajax_search_field_wrap").removeClass("dipl_ajax_search_loader"),s.closest(".dipl_ajax_search").removeClass("dipl_ajax_search_active"),s.closest(".dipl_ajax_search").parents(".et_pb_column").removeClass("dipl_ajax_search_active_parent"),s.closest(".dipl_ajax_search").parents(".et_pb_row").removeClass("dipl_ajax_search_active_parent"),dipl_close_all_lists(s)}),a("body").on("keyup",".dipl_ajax_search_field",function(){let e=a(this);""===e.val()&&(e.closest(".dipl_ajax_search").removeClass("dipl_ajax_search_active"),e.closest(".dipl_ajax_search").parents(".et_pb_column").removeClass("dipl_ajax_search_active_parent"),e.closest(".dipl_ajax_search").parents(".et_pb_row").removeClass("dipl_ajax_search_active_parent"),dipl_close_all_lists(e))}),a("body").on("focus",".dipl_ajax_search_field",function(){a(".dipl_ajax_search_field").not(a(this)).closest(".dipl_ajax_search").removeClass("dipl_ajax_search_active"),a(".dipl_ajax_search_field").not(a(this)).closest(".dipl_ajax_search").parents(".et_pb_column").removeClass("dipl_ajax_search_active_parent"),a(".dipl_ajax_search_field").not(a(this)).closest(".dipl_ajax_search").parents(".et_pb_row").removeClass("dipl_ajax_search_active_parent")}),a("body").on("click",".dipl_ajax_search_field",function(e){a(this).trigger("input")}),a("html, body").on("click",function(a){dipl_close_all_lists(a.target)})});