jQuery( document ).ready( function($) {

	if ( $( '.dipl_horizontal_scrolling_card' ).length > 0 ) {
		gsap.registerPlugin( ScrollTrigger );
		$( document ).find('.dipl_horizontal_scrolling_card').each( function() {
			let $section         = $( this ),
				$container       = $section.find('.dipl-sticky-cards-wrapper'),
				$scroller        = $section.find( '.dipl-sticky-cards-scroller' ),
				scrollableWidth  = $container[0].scrollWidth,
				visibleWidth     = $container.outerWidth(),
				totalScroll      = scrollableWidth - visibleWidth;

			let triggerPosition  = $container.data( 'animation_start_element_pos' ) || 'center',
				viewPortPosition = $container.data( 'animation_start_viewport_pos' ) || 'center',
				animationSpeed   = parseFloat( $container.data( 'animation_speed' ) ) || 1;

			gsap.to( $container, {
				x: -totalScroll,
				ease: "none",
				duration: animationSpeed,
				scrollTrigger: {
					trigger: $scroller,
					pin: true,
					start: `${triggerPosition} ${viewPortPosition}`,
					scrub: true,
					end: () => `+=${totalScroll}`
				}
			} );
		} );
	}
} ); // Over document ready.
