jQuery( document ).ready( function($) {
	$( '.dipl_dropdown_button' ).each( function () {
		var $wrap       = $(this).find( '.dipl_dropdown_button_wrap' );
		var $inner      = $wrap.find( '.dipl_dropdown_button_inner' );
		var $button     = $wrap.find( '.et_pb_button' );
		var $menu       = $wrap.find( '.dipl_dropdown_menu_items' );
		var triggerType = $wrap.data( 'trigger-type' ) || 'click';

		// Hide the menu initially
		$menu.hide();
		if ( triggerType === 'hover' ) {
			$button.on( 'mouseenter', function() {
				$menu.stop( true, true ).slideDown( 200 );
			} );
			$inner.on( 'mouseleave', function() {
				$menu.stop( true, true ).slideUp( 200 );
			} );

			$wrap.find( 'a[href="#dipl-dropdown-button"]' ).on( 'click', function(e) {
				e.preventDefault();
			} );
		} else {
			// Toggle on click
			$button.on( 'click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				$menu.stop( true, true ).slideToggle( 200 );
			} );

			// Close dropdown if clicked outside
			$( document ).on( 'click', function(e) {
				if ( ! $inner.is( e.target ) && $inner.has( e.target ).length === 0 ) {
					$menu.slideUp( 200 );
				}
			} );
		}
	} );
} ); // Document ready.
